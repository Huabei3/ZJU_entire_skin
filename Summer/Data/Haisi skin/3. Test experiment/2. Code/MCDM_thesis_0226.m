load('MCDM_thesis_0226.mat');
for i=1:26
    for l=1:5
%======intra=========
 A1(i,l*3-2:l*3)=sum(a1(l*100-99:l*100-75,i).*b(1:25,:))./sum(a1(l*100-99:l*100-75,i));
 A2(i,l*3-2:l*3)=sum(a2(l*100-99:l*100-75,i).*b(1:25,:))./sum(a2(l*100-99:l*100-75,i));
 deA(i,l)=(sqrt(sum((A1(i,l*3-2:l*3)- A2(i,l*3-2:l*3)).^2)));
 d0A(i,l)=deltaE2000(A1(i,l*3-2:l*3),A2(i,l*3-2:l*3));
 C1(i,l*3-2:l*3)=sum(a1(l*100-74:l*100-50,i).*b(26:50,:))./sum(a1(l*100-74:l*100-50,i));
 C2(i,l*3-2:l*3)=sum(a2(l*100-74:l*100-50,i).*b(26:50,:))./sum(a2(l*100-74:l*100-50,i));
 deC(i,l)=(sqrt(sum((C1(i,l*3-2:l*3)- C2(i,l*3-2:l*3)).^2)));
 d0C(i,l)=deltaE2000(C1(i,l*3-2:l*3),C2(i,l*3-2:l*3));
 O1(i,l*3-2:l*3)=sum(a1(l*100-49:l*100-25,i).*b(51:75,:))./sum(a1(l*100-49:l*100-25,i));
 O2(i,l*3-2:l*3)=sum(a2(l*100-49:l*100-25,i).*b(51:75,:))./sum(a2(l*100-49:l*100-25,i));
 deO(i,l)=(sqrt(sum((O1(i,l*3-2:l*3)- O2(i,l*3-2:l*3)).^2)));
 d0O(i,l)=deltaE2000(O1(i,l*3-2:l*3),O2(i,l*3-2:l*3));
 S1(i,l*3-2:l*3)=sum(a1(l*100-24:l*100,i).*b(76:100,:))./sum(a1(l*100-24:l*100,i));
 S2(i,l*3-2:l*3)=sum(a2(l*100-24:l*100,i).*b(76:100,:))./sum(a2(l*100-24:l*100,i));
 deS(i,l)=(sqrt(sum((S1(i,l*3-2:l*3)- S2(i,l*3-2:l*3)).^2)));
 d0S(i,l)=deltaE2000(S1(i,l*3-2:l*3),S2(i,l*3-2:l*3));
 G1(i,l*3-2:l*3)=sum(a1(l*100-99:l*100,i).*b(1:100,:))./sum(a1(l*100-99:l*100,i));
 G2(i,l*3-2:l*3)=sum(a2(l*100-99:l*100,i).*b(1:100,:))./sum(a2(l*100-99:l*100,i));
 deG(i,l)=(sqrt(sum((G1(i,l*3-2:l*3)- G2(i,l*3-2:l*3)).^2)));
 d0G(i,l)=deltaE2000(G1(i,l*3-2:l*3),G2(i,l*3-2:l*3));
    end
end
de=[mean(deA);mean(deC);mean(deO);mean(deS);mean(deG)];
d0=[mean(d0A);mean(d0C);mean(d0O);mean(d0S);mean(d0G)];

 %======inter=========
 aa1=mean(A1);cc1=mean(C1);oo1=mean(O1);ss1=mean(S1);gg1=mean(G1);
for i=1:26
    for l=1:5
 dA(i,l)=deltaE2000(A1(i,l*3-2:l*3),aa1(l*3-2:l*3));
 dC(i,l)=deltaE2000(C1(i,l*3-2:l*3),cc1(l*3-2:l*3));
 dO(i,l)=deltaE2000(O1(i,l*3-2:l*3),oo1(l*3-2:l*3));
 dS(i,l)=deltaE2000(S1(i,l*3-2:l*3),ss1(l*3-2:l*3));
 dG(i,l)=deltaE2000(G1(i,l*3-2:l*3),gg1(l*3-2:l*3));
    end
end
d=[mean(dA);mean(dC);mean(dO);mean(dS);mean(dG)];
%  for i=1:5
%     a1(1+100*i-100:25+100*i-100,:)=(aa1(76+400*i-400:100+400*i-400,:)+aa1(101+400*i-400:125+400*i-400,:))./2;
%     a1(26+100*i-100:50+100*i-100,:)=(aa1(51+400*i-400:75+400*i-400,:)+aa1(126+400*i-400:150+400*i-400,:))./2;
%     a1(51+100*i-100:75+100*i-100,:)=(aa1(1+400*i-400:25+400*i-400,:)+aa1(151+400*i-400:175+400*i-400,:))./2;
%     a1(76+100*i-100:100+100*i-100,:)=(aa1(26+400*i-400:50+400*i-400,:)+aa1(176+400*i-400:200+400*i-400,:))./2;
%     a2(1+100*i-100:25+100*i-100,:)=(aa2(76+400*i-400:100+400*i-400,:)+aa2(101+400*i-400:125+400*i-400,:))./2;
%     a2(26+100*i-100:50+100*i-100,:)=(aa2(51+400*i-400:75+400*i-400,:)+aa2(126+400*i-400:150+400*i-400,:))./2;
%     a2(51+100*i-100:75+100*i-100,:)=(aa2(1+400*i-400:25+400*i-400,:)+aa2(151+400*i-400:175+400*i-400,:))./2;
%     a2(76+100*i-100:100+100*i-100,:)=(aa2(26+400*i-400:50+400*i-400,:)+aa2(176+400*i-400:200+400*i-400,:))./2;
%     a3(1+100*i-100:25+100*i-100,:)=(aa3(76+400*i-400:100+400*i-400,:)+aa3(101+400*i-400:125+400*i-400,:))./2;
%     a3(26+100*i-100:50+100*i-100,:)=(aa3(51+400*i-400:75+400*i-400,:)+aa3(126+400*i-400:150+400*i-400,:))./2;
%     a3(51+100*i-100:75+100*i-100,:)=(aa3(1+400*i-400:25+400*i-400,:)+aa3(151+400*i-400:175+400*i-400,:))./2;
%     a3(76+100*i-100:100+100*i-100,:)=(aa3(26+400*i-400:50+400*i-400,:)+aa3(176+400*i-400:200+400*i-400,:))./2;
% 
% end 
% % for j=1:30
% %     for i=1:5 
% %  c1(j,3*i-2:3*i)=sum(b(1:25,1:3).*a3(1+i*100-100:25+i*100-100,j))./sum(a3(1:25,j));
% %  c2(j,3*i-2:3*i)=sum(b(26:50,1:3).*a3(26+i*100-100:50+i*100-100,j))./sum(a3(1:25,j));
% %  c3(j,3*i-2:3*i)=sum(b(51:75,1:3).*a3(51+i*100-100:75+i*100-100,j))./sum(a3(1:25,j));
% %  c4(j,3*i-2:3*i)=sum(b(76:100,1:3).*a3(76+i*100-100:i*100,j))./sum(a3(1:25,j));
% %     end
% % end
%  for i=1:5 
%       m1(i,1)=MCDM(c1(:,3*i-2:3*i)); 
%       m1(i,2)=MCDM(c2(:,3*i-2:3*i)); 
%       m1(i,3)=MCDM(c3(:,3*i-2:3*i)); 
%       m1(i,4)=MCDM(c4(:,3*i-2:3*i)); 
%  end
% m1=m1./29;